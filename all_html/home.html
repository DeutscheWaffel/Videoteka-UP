<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
<link rel="stylesheet" href="/all_css/home.css">
</head>
<body>
    <div class="movies-container">
        <div class="all-movies-section" id="allMoviesSection">
            <!-- –í—Å–µ —Ñ–∏–ª—å–º—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        <div class="random-movies-section" id="randomMoviesSection">
            <h2 class="section-title">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</h2>
            <!-- 4 —Å–ª—É—á–∞–π–Ω—ã—Ö —Ñ–∏–ª—å–º–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    <div class="bottom-bar">
        <div class="sort-controls">
            <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:
                <select id="sortSelect">
                    <option value="title">–ù–∞–∑–≤–∞–Ω–∏—é</option>
                    <option value="author">–†–µ–∂–∏—Å—Å—ë—Ä—É</option>
                    <option value="price">–¶–µ–Ω–µ</option>
                </select>
            </label>
            <button class="menu-btn menu-btn--subtle" id="downloadCatalogBtn">–°–∫–∞—á–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥</button>
        </div>
        <div class="menu-buttons">
            <button class="menu-btn" onclick="location.href='home.html'">–ì–ª–∞–≤–Ω–∞—è üè†</button>
            <button class="menu-btn" onclick="location.href='catalog.html'">–ö–∞—Ç–∞–ª–æ–≥ üìí</button>
            <button class="menu-btn" onclick="location.href='cart.html'">–ö–æ—Ä–∑–∏–Ω–∞ üõí</button>
            <button class="menu-btn" onclick="location.href='bookmarks.html'">–ó–∞–∫–ª–∞–¥–∫–∏ üîñ</button>
            <button class="menu-btn" onclick="location.href='profile.html'">–ü—Ä–æ—Ñ–∏–ª—å üöπ</button>
        </div>
        </div>
    </div>
</body>
<script src="/app.js"></script>
<script>
    (function(){
        const btn = document.getElementById('downloadCatalogBtn');
        if(!btn) return;
        btn.addEventListener('click', async () => {
            try {
                const res = await fetch(`${window.location.origin}/api/v1/catalog.docx`);
                if(!res.ok){
                    const t = await res.text();
                    throw new Error(t || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç');
                }
                const blob = await res.blob();
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'catalog.docx';
                document.body.appendChild(a);
                a.click();
                URL.revokeObjectURL(url);
                a.remove();
            } catch (e) {
                alert(e.message || '–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è');
            }
        });
    })();
</script>
</html>